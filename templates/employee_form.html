<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>{{ 'Edit' if employee else 'Add' }} Employee</title>
    <style>
      label { display:block; margin-top:8px; }
      input, select { width: 300px; }
    </style>
  </head>
  <body>
    {% include '_header.html' %}
    <h1>{{ 'Edit' if employee else 'Add' }} Employee</h1>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul style="color: red; list-style-type: none; padding:0;">
          {% for m in messages %}
            <li>{{ m }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    {% if employee %}
      <form method="post" action="{{ url_for('employees.edit_employee', ssn=employee.ssn) }}">
        <label>SSN (readonly)</label>
        <input name="ssn" value="{{ employee.ssn }}" readonly>

        <label>Full Name</label>
        <input name="full_name" value="{{ employee.full_name }}" readonly>

        <label>Address</label>
        <input name="address" value="{{ employee.address }}">

        <label>Salary</label>
        <input name="salary" value="{{ employee.salary }}">

        <label>Department Number (Dno)</label>
        <input name="dno" value="{{ employee.dno }}">

        <p><button type="submit">Save</button> <a href="{{ url_for('employees.list_employees') }}">Cancel</a></p>
      </form>
    {% else %}
      <form method="post" action="{{ url_for('employees.add_employee') }}">
        <label>SSN</label>
        <input name="ssn" required pattern="[0-9]{9}" inputmode="numeric" minlength="9" maxlength="9" title="Enter exactly 9 digits (numbers only)">

        <label>Full Name</label>
        <input name="full_name" required>

        <label>Address</label>
        <input name="address">

        <label>Salary</label>
        <input name="salary" type="number" step="0.01">

        <label>Department Number (Dno)</label>
        <input name="dno">

        <p><button type="submit">Add Employee</button> <a href="{{ url_for('employees.list_employees') }}">Cancel</a></p>
      </form>
    {% endif %}
  </body>
</html>
